{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking</title>
    <link rel="stylesheet" type="text/css" href="{% static '/css/bootstrap.min.css' %}"  />
    <link rel="stylesheet" type="text/css" href="{% static '/css/jquery-ui.css' %}"  />
    <link rel="stylesheet" type="text/css" href="{% static '/css/side-bar.css' %}"  />
    <script src="{% static '/js/jquery-3.3.1.slim.min.js' %}" ></script>
    <script src="{% static '/js/bootstrap.min.js' %}" ></script>
    <!--script src="{% static '/js/bootstrap.min4.js' %}" ></script-->
    <script src="{% static '/js/jquery-ui.js' %}"></script>
    <script src="{% static '/js/jquery-1.12.4.js' %}"></script>
    <script src="{% static '/js/jquery-3.3.1.js' %}"></script>
    <script src="{% static '/js/sweetalert.min.js' %}"></script>
    <script src="{% static '/js/jquery.min.js' %}"></script>
    <script src="{% static '/js/bootstrap.min1.js' %}"></script>
    <script src="{% static '/js/jquery.min1.js' %}"></script>
    <script src="{% static '/js/jquery-ui.min.js' %}"></script>
    <script src="{% static '/js/jspdf.min.js' %}"></script>

    <script src="{% static '/DataTables/datatables.min.js' %}"></script>
    <script src="{% static '/js/dataTables.bootstrap4.min.js' %}"></script>
    
    </head>
<style>

</style>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="position: fixed; top:0; width:100%; z-index:100;">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a href="#" id="menu-toggle" class="text-white"><h2><i class="fas fa-bars"></i></h2></a>
      </li>
    </ul>
    &nbsp;&nbsp;
    <ul class="navbar-nav">
      <li class="nav-item">
        <label class="navbar-brand"><h2>&nbsp;&nbsp; </h2></label>
      </li>
    </ul>
    <!-- <ul class="navbar-nav mx-auto">
      <li class="nav-item">
        <div class="nav-link text-white" style="font-size: 25px;">Registration No.- {{reg_no}}<div>
      </li>
    </ul> -->
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
      {% if user %}
        <a href="/" class="nav-link text-white">Logout</a>
      {% else %}
        <a href="/" class="nav-link text-white">Login</a>
      {% endif %}
      </li>
    </ul>
    </nav>

   <form method='POST' action="{% url 'booking' idd %}">
    {% csrf_token %}
    <br><br><br><br>
    <center>
    <h1><b> ** BOOK NOW ** </b></h1>
    </center>
    <br>
    <center>
    <input type='hidden' id='itemid' value='{{idd}}'>
    <ul style="background-color:yellow">
        {{msg}}
    </ul>
    <table width=60% cellspacing=10% cellpadding=10%>
        <tr>
            <td>
            <div class='row'>
                <div class='col'>
                <label><b>Userid</b></label>
                <input type="text" id='userid' name='userid' value="{{user}}" maxlength='20' class="form-control" placeholder="Userid" readonly required>
                </div>
                <div class='col'>
                <label><b>Supplier Id</b></label>
                <input type="text" id='suppid' name='suppid' value='{{suppid}}' maxlength='20'  class="form-control" readonly required>
                </div>

            </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class='row'>
                    <div class='col'>
                        <label><b>Name</b></label>
                        <input type="text" id='name' name='name' maxlength='50' value='{{name}}' class="form-control" pattern="[A-Za-z ]+" placeholder="Name" required>
                    </div>
                    <div class='col'>
                        <label><b>Email</b></label>
                        <input type="text" id='email' name='email' maxlength='50' value="{{email}}" pattern="[A-Za-z0-9]+@[A-Za-z]+.[A-Za-z]+" class="form-control" placeholder="E-mail" readonly required>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class='row'>
                    <div class='col'>
                    <label><b>Amount</b></label>
                    <input type="number" id='amt' name='amt' value="{{rate}}" readonly class='form-control'  >
                    </div>
                    <div class='col'>
                    <label><b>Address</b></label>
                    <input type="text" id="add" name='add' value="{{address}}" maxlength='100' class="form-control" placeholder="Address" required>
                    </div>

                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class='row'>
                    <div class='col'>
                    <label><b>Phone</b></label>
                    <input type="text" id="phone" name='phone' value='{{phone}}' maxlength='10' minlength='10' readonly class="form-control" placeholder="Phone Number" pattern="[0-9]+" required>
                    </div>
                    <div class='col'>
                        <label><b>Alternate Contact Number</b></label>
                        <input type="text" id="phone2" name='phone2' value='{{phone}}' maxlength='10' minlength='10' class="form-control" placeholder="Alternate Contact Number" pattern="[0-9]+" required>
                    
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class='row'>
                    <div class='col'>
                        <label><b>From Date</b></label>
                        <input type="text" id="f_date" name='f_date' maxlength='10' minlength='10' class="form-control" placeholder="From Date" pattern="[0-9-]+" required>
                    </div>
                    <div class='col'>
                        <label><b>To Date</b></label>
                        <input type="text" id="t_date" name='t_date' maxlength='10' minlength='10' class="form-control" placeholder="To Date" pattern="[0-9-]+" onchange="test()" required>
                    </div>
                </div>
            </td>
        </tr>
    </table>
    <br>
    <div id='btnn' >
    <input type="submit" id='book' name="submit" value="Book Now" class="form-control btn btn-primary" style="width:200px">
    </div>
    <div id='un'>
        <center>Item is unavailable!!</center>
    </div>
    </center>

   </form>
   
</body>
</html>
<script>
    $('#un').hide();
    function test()
    {
        var f_date=document.getElementById('f_date').value;
        var t_date=document.getElementById('t_date').value;
        var itemid=document.getElementById('itemid').value;
        var suppid=document.getElementById('suppid').value;
        
        var data={itemid,suppid,f_date,t_date}
        $.ajax({
            type : 'GET',
            url : "{% url 'check_avail_booking' %}",
            dataType : 'json',
            data : data,
            success : function(response)
            {
                if(response.length>0)
                {
                    $('#btnn').show();
                    $('#un').hide();
                }
                else
                {
                    $('#btnn').hide();
                    $('#un').show();
                }
            }
        })

        
    }
$('#f_date').datepicker({
    dateFormat: 'dd-mm-yy',
 });

$('#t_date').datepicker({
    dateFormat: 'dd-mm-yy',
 });
$('#btnn').hide();

</script>


